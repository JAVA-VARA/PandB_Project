<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>자유게시판 글 목록</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

<div class="container text-center">
<header class="p-3 text-bg-dark">
    <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
                <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><use xlink:href="#bootstrap"></use></svg>
            </a>

            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                <li><a href="/homePage" class="nav-link px-2 text-secondary">Home</a></li>
                <li><a href="/articles" class="nav-link px-2 text-white">자유게시판</a></li>
                <li><a href="#" class="nav-link px-2 text-white">정보공유게시판</a></li>
                <li><a href="#" class="nav-link px-2 text-white">갤러리</a></li>
                <li><a href="#" class="nav-link px-2 text-white">Hot 게시판</a></li>
                <li><a href="#" class="nav-link px-2 text-white">공지</a></li>
            </ul>

            <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">
                <input type="search" class="form-control form-control-dark text-bg-dark" placeholder="Search..." aria-label="Search" id="Search">
            </form>

            <div class="text-end">
                <button
                        type="button" class="btn btn-outline-light me-2" onclick="location.href='/login'">Login</button>
                <button
                        type="button" class="btn btn-warning" onclick="location.href='/signup'">Sign-up</button>

                <button
                        type="button" class="btn btn-outline-light me-2" onclick="location.href='/logout'">LogOut</button>

                <!--                    <button th:if="${article.boardNo} != null"-->
                <!--                            type="button" class="btn btn-outline-light me-2" onclick="location.href='/logout'">LogOut</button>-->
            </div>
        </div>
    </div>
</header>
</div>

<div class="container"  style="padding:40px;">
    <h3 class="mb-3 text-center" >자유 게시판</h3>

    <button type="button" id="create-btn"
            th:onclick="|location.href='@{/new-article}'|"
            class="btn btn-outline-dark me-2">글쓰기</button>

        <div class="container mt-5" >
            <table class="table">
                <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">제목</th>
                    <th scope="col">작성자</th>
                    <th scope="col">작성일</th>
                    <th scope="col">조회수</th>
                </tr>
                </thead>

                <tbody>

                <tr th:if="${#lists.isEmpty(boardPage)}">
                    <td colspan="3">게시글이 없습니다.</td>
                </tr>


                <tr  th:each="boardList : ${boardPage}">
                    <input type="hidden" id="view-id" th:value="${boardList.boardNo}">

                    <td th:text="${boardList.boardNo}"></td>
                    <td>
                        <a id="view-btn" th:href="@{/articles/{id}(id=${boardList.boardNo})}" th:text="${boardList.title}" target="blank" />
                    </td>
                    <td th:text="${boardList.author}"></td>
                    <td th:text="${#temporals.format(boardList.createdAt, 'yyyy-MM-dd HH:mm')}"></td>
                    <td th:text="${boardList.views}"></td>
                </tr>
                </tbody>
            </table>

            <nav style="text-align: center;">
                <!--표에 사용될 변수값 초기화 -->
                <ul class="pagination justify-content-center"
                    th:with="start=${T(java.lang.Math).floor(boardPage.number/3)*10 + 1},
                last=(${start + 9 < boardPage.totalPages ? start + 9 : boardPage.totalPages})">
                    <th:block th:with="
                firstAddr=@{/articles(page=1)},
                prevAddr=@{/articles(page=${boardPage.number})},
                nextAddr=@{/articles(page=${boardPage.number + 2})},
                lastAddr=@{/articles(page=${boardPage.totalPages})}">

                        <!-- 첫번재 페이지 -->
                        <li class="page-item">
                            <a class="page-link"  th:href="${firstAddr}" aria-label="First">
                                <span aria-hidden="true">First</span>
                            </a>
                        </li>

                        <!-- 이전 페이지로 가기 버튼 -->
                        <li class="page-item" th:class="${boardPage.first} ? 'disabled'">
                            <a class="page-link" th:href="${boardPage.first} ? '#' :${prevAddr}"
                               aria-label="Previous">
                                <span aria-hidden="true">&lt;</span>
                            </a>
                        </li>

                        <!--1,2,3,4,.. 등 페이지-->
                        <li class="page-item" th:each="page: ${#numbers.sequence(start, last)}"
                            th:class="${page == boardPage.number + 1} ? 'active'">
                            <a class="page-link"
                               th:text="${page}" th:href="@{/articles(page=${page})}"></a>
                        </li>

                        <!--다음 페이지로 -->
                        <li class="page-item" th:class="${boardPage.last} ? 'disabled'">
                            <a class="page-link" th:href="${boardPage.last} ? '#' : ${nextAddr}"
                               aria-label="Next">
                                <span aria-hidden="true">&gt;</span>
                            </a>
                        </li>

                        <!--맨 마지막 페이지로 이동 -->
                        <li class="page-item">
                            <a class="page-link" th:href="${lastAddr}" aria-label="Last">
                                <span aria-hidden="true">Last</span>
                            </a>
                        </li>
                    </th:block>
                </ul>
            </nav>

    </div>

</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

<script src="/js/views.js"></script>
<script src="/js/article.js"></script>
<script src="/js/token.js"></script>
</body>

